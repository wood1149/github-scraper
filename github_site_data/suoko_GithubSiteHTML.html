<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Firefox OS: what&#39;s next ?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Gabriele Vidali">
  
  
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Firefox OS: what's next ?">
<meta property="og:url" content="http://suoko.github.io/blog/">
<meta property="og:site_name" content="Firefox OS: what's next ?">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Firefox OS: what's next ?">
<meta name="twitter:description">

  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Firefox OS: what&#39;s next ?</a></h1>
    <p><a href="/"></a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="//www.twitter.com/gvidali">Twitter</a></li>
      
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2014/10/29/Haphost/">
  <time datetime="2014-10-29T09:45:45.000Z">
    Oct 29 2014
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2014/10/29/Haphost/">Haphost</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="Haphost_and_your_private_datas">Haphost and your private datas</h1>
<h2 id="Your_next_dropbox">Your next dropbox</h2>
<p>Everybody synced their contacts to his google/yahoo/live/whatever account nowadays. The same happened to his calendar. That’s free so why not?</p>
<p>Then haphost arrived.</p>
<p>What’s that? A free vps. Is it safe? How safe compared to the before mentioned services? I don’t know that. We’ll dig about that later.</p>
<p>Haphost offers a free vps with 10gb space hosted somewhere in Germany or another country (what was it?).</p>
<p>Plenty of space for your contacts and your calendar tasks. But you got more. You can compare those 10gigs to the 2gb from Dropbox, it’s an online storage for your precious files. But how do you manage it?</p>
<p>Owncloud! A software easy to install, configure and use.</p>
<p>You can sync the contacts and your calendar on your droid phone thanks to davdroid (search for this app in the f-droid appstore): firefoxos offers caldav sync by default, so many way to keep YOUR OWN DATAS synced.</p>
<p>Security is guaranteed.</p>
<p>Be sure to have SSL on your domain though. Https is mandatory in this case. You find free SSL certificates at startssl.com but remember that you can’t have ssl with a dot tk account so you need to find a supported domain.</p>
<p>Just be patient since haphost will take some weeks before activating your account</p>
<hr>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2014/10/23/Mapbox-nav-redux/">
  <time datetime="2014-10-23T12:08:37.000Z">
    Oct 23 2014
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2014/10/23/Mapbox-nav-redux/">Mapbox nav redux</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="Mapbox_turn_by_turn_analysis">Mapbox turn by turn analysis</h1>
<h2 id="Reducing_the_app_code">Reducing the app code</h2>
<p>The index.html can be reduced as follow</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">'utf-8'</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Navigation<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">'//api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css'</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'//www.mapbox.com/base/latest/base.css'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'assets/css/mapbox-directions.css'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'assets/css/site.css'</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">'map'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">'#'</span> <span class="attribute">class</span>=<span class="value">'fill-blue icon menu big dark round toggle'</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">'#'</span> <span class="attribute">class</span>=<span class="value">'fill-blue icon x big dark round stop'</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">'#'</span> <span class="attribute">class</span>=<span class="value">'fill-blue icon video big dark round animate'</span>&gt;</span><span class="tag">&lt;/<span class="title">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'route'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">h1</span> <span class="attribute">class</span>=<span class="value">'title pad2x'</span>&gt;</span><span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">h2</span> <span class="attribute">class</span>=<span class="value">'summary pad2x'</span>&gt;</span><span class="tag">&lt;/<span class="title">h2</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">'list'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'alert-box fill-green center dark'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">h2</span> <span class="attribute">class</span>=<span class="value">'action pad2'</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">'distance'</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">'maneuver'</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">h2</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'pin-left pad2x step-icon keyline-right'</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">'progress-limiter'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">hr</span> <span class="attribute">class</span>=<span class="value">'progress'</span> <span class="attribute">align</span>=<span class="value">'left'</span> <span class="attribute">width</span>=<span class="value">'1%'</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="title">iframe</span> <span class="attribute">class</span>=<span class="value">'voice'</span> <span class="attribute">src</span>=<span class="value">''</span>&gt;</span><span class="tag">&lt;/<span class="title">iframe</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/mapbox.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/hash.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/jquery.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/site.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>This is the essential assets/js/site.js which is where the map creation and routing happen</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line"></div><div class="line">    L.mapbox.accessToken = <span class="string">'pk.eyJ1Ijoic3Vva28iLCJhIjoicUl0WUpGbyJ9.PHo4BAra3WHDCljdCQ8F6Q'</span>;</div><div class="line">    <span class="keyword">var</span> map = L.mapbox.map(<span class="string">'map'</span>, <span class="string">'suoko.jbhn5d4b'</span>, {</div><div class="line">        tileLayer: {</div><div class="line">            detectRetina: <span class="literal">true</span></div><div class="line">        },</div><div class="line">        zoomControl: <span class="literal">true</span></div><div class="line">    })</div><div class="line">    .addControl(L.mapbox.geocoderControl(<span class="string">'mapbox.places-v1'</span>, {</div><div class="line">        keepOpen: <span class="literal">false</span></div><div class="line">    }));</div><div class="line"></div><div class="line">    <span class="keyword">new</span> L.hash(map);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> route = L.layerGroup();</div><div class="line">    <span class="keyword">var</span> locationMarker = L.layerGroup();</div><div class="line">    <span class="keyword">var</span> circleMarkers = L.layerGroup();</div><div class="line">    <span class="keyword">var</span> endMarker = L.layerGroup();</div><div class="line">    <span class="keyword">var</span> lastPressed;</div><div class="line">    <span class="keyword">var</span> currentRoute;</div><div class="line">    <span class="keyword">var</span> section = <span class="number">0</span>;</div><div class="line">    <span class="keyword">var</span> saySomethingOnce = <span class="number">0</span>;</div><div class="line">    <span class="keyword">var</span> heading = <span class="number">0</span>;</div><div class="line">    <span class="keyword">var</span> reRouteDistance = <span class="number">120</span>;</div><div class="line">    <span class="keyword">var</span> madeToNextStepDistance = <span class="number">50</span>;</div><div class="line"></div><div class="line">    map.on(<span class="string">'locationfound'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line">        locationMarker.clearLayers(map);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> icon = L.divIcon({</div><div class="line">            className: <span class="string">'location-icon'</span>,</div><div class="line">            iconSize: [<span class="number">25</span>, <span class="number">25</span>]</div><div class="line">        });</div><div class="line"></div><div class="line">        map.panTo(e.latlng);</div><div class="line"></div><div class="line">        L.marker(e.latlng, {</div><div class="line">            icon: icon,</div><div class="line">            clickable: <span class="literal">true</span>,</div><div class="line">            draggable: <span class="literal">true</span></div><div class="line">        }).addTo(locationMarker).on(<span class="string">'dragend'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line">            map.stopLocate();</div><div class="line">            checkUserComparedToRoute(currentRoute);</div><div class="line">            followUserAndRoute(currentRoute);</div><div class="line">        });;</div><div class="line">        locationMarker.addTo(map);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (lastPressed && currentRoute) {</div><div class="line">            checkUserComparedToRoute(currentRoute);</div><div class="line">            followUserAndRoute(currentRoute);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (e.heading) {</div><div class="line">            heading = e.heading;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            $(<span class="string">'.location-icon'</span>).addClass(<span class="string">'no-after'</span>);</div><div class="line">        }</div><div class="line">    });</div><div class="line"></div><div class="line">    map.on(<span class="string">'locationerror'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + <span class="built_in">JSON</span>.stringify(e))</div><div class="line">    });</div><div class="line"></div><div class="line">    map.locate({</div><div class="line">        setView: <span class="literal">true</span>,</div><div class="line">        maxZoom: <span class="number">16</span>,</div><div class="line">        enableHighAccuracy: <span class="literal">true</span>,</div><div class="line">        watch: <span class="literal">true</span></div><div class="line">    });</div><div class="line"></div><div class="line">    map.on(<span class="string">'contextmenu'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line">        lastPressed = e;</div><div class="line">        getDirections(locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lng, locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lat, e.latlng.lng, e.latlng.lat, <span class="literal">true</span>);</div><div class="line">    });</div><div class="line"></div><div class="line">    $(<span class="string">'.animate'</span>).click(<span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line">        e.preventDefault();</div><div class="line">        <span class="keyword">if</span> (!currentRoute) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="keyword">var</span> animatedPosition = <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> marker = L.marker([<span class="number">0</span>, <span class="number">0</span>], {</div><div class="line">            icon: L.mapbox.marker.icon()</div><div class="line">        }).addTo(map),</div><div class="line">            j = <span class="number">0</span>;</div><div class="line">        map.stopLocate()</div><div class="line">        tick();</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">tick</span><span class="params">()</span> </span>{</div><div class="line">            checkUserComparedToRoute(currentRoute);</div><div class="line">            followUserAndRoute(currentRoute);</div><div class="line">            locationMarker.getLayers()[<span class="number">0</span>].setLatLng(L.latLng([currentRoute.routes[<span class="number">0</span>].geometry.coordinates[j][<span class="number">1</span>], currentRoute.routes[<span class="number">0</span>].geometry.coordinates[j][<span class="number">0</span>]]))</div><div class="line">            <span class="keyword">if</span> (++j &lt; currentRoute.routes[<span class="number">0</span>].geometry.coordinates.length) setTimeout(tick, <span class="number">1000</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">    });</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getDirections</span><span class="params">(startLng, startLat, finishLng, finishLat, showMapView)</span> </span>{</div><div class="line">        saySomethingOnce = <span class="number">0</span>;</div><div class="line">        $.ajax({</div><div class="line">            type: <span class="string">'GET'</span>,</div><div class="line">            dataType: <span class="string">'json'</span>,</div><div class="line">            url: <span class="string">'https://api.tiles.mapbox.com/v3/bobbysud.map-8owxxni8/directions/driving/'</span> + startLng + <span class="string">','</span> + startLat + <span class="string">';'</span> + finishLng + <span class="string">','</span> + finishLat + <span class="string">'.json?instrucstions=html'</span>,</div><div class="line">            </div><div class="line"></div><div class="line">	    success: <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (e.error) alert(e.error);</div><div class="line"></div><div class="line">                clearMap();</div><div class="line"></div><div class="line">                <span class="keyword">var</span> line = [];</div><div class="line">                currentRoute = e;</div><div class="line">                <span class="keyword">var</span> summary = e.routes[<span class="number">0</span>].summary;</div><div class="line">                <span class="keyword">var</span> duration = (e.routes[<span class="number">0</span>].distance * <span class="number">0.000621371</span>).toFixed(<span class="number">2</span>) + <span class="string">' miles and '</span> + <span class="built_in">Math</span>.round(e.routes[<span class="number">0</span>].duration * <span class="number">1.3</span> / <span class="number">60</span>) + <span class="string">' minutes'</span>;</div><div class="line">                $(<span class="string">'.route .list, .route .summary, .route .title'</span>).empty();</div><div class="line">                $(<span class="string">'.toggle, .stop, .animate'</span>).fadeIn();</div><div class="line"></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; e.routes[<span class="number">0</span>].steps.length; i++) {</div><div class="line">                    L.circle([e.routes[<span class="number">0</span>].steps[i].maneuver.location.coordinates[<span class="number">1</span>], e.routes[<span class="number">0</span>].steps[i].maneuver.location.coordinates[<span class="number">0</span>]], <span class="number">51</span>, {</div><div class="line">                        color: <span class="string">'#3c4e5a'</span>,</div><div class="line">                        weight: <span class="number">1</span></div><div class="line">                    }).bindPopup(<span class="string">'&lt;div&gt;Step: '</span> + i + <span class="string">'&lt;/div&gt;&lt;div&gt;Instruction: '</span> + e.routes[<span class="number">0</span>].steps[i].maneuver.instruction + <span class="string">'&lt;/div&gt;'</span>)</div><div class="line">                        .addTo(circleMarkers);</div><div class="line"></div><div class="line">                    <span class="keyword">if</span> (e.routes[<span class="number">0</span>].steps[i].maneuver.type.split(<span class="string">' '</span>)[<span class="number">1</span>]) {</div><div class="line">                        <span class="keyword">var</span> icon = e.routes[<span class="number">0</span>].steps[i].maneuver.type.split(<span class="string">' '</span>)[<span class="number">1</span>];</div><div class="line">                    } <span class="keyword">else</span> {</div><div class="line">                        <span class="keyword">var</span> icon = e.routes[<span class="number">0</span>].steps[i].maneuver.type;</div><div class="line">                    }</div><div class="line"></div><div class="line">                    <span class="keyword">var</span> instruct = <span class="string">'&lt;li data-step='</span> + i + <span class="string">' class="pad2 mapbox-directions-step" data-lat='</span> + e.routes[<span class="number">0</span>].steps[i].maneuver.location.coordinates[<span class="number">1</span>] + <span class="string">' data-lng='</span> + e.routes[<span class="number">0</span>].steps[i].maneuver.location.coordinates[<span class="number">0</span>] + <span class="string">'&gt;'</span> +</div><div class="line">                        <span class="string">'&lt;span class="mapbox-directions-icon mapbox-turn-'</span> + icon + <span class="string">'-icon"&gt;&lt;/span&gt;'</span> +</div><div class="line">                        <span class="string">'&lt;span class="mapbox-directions-step-maneuver pad2x"&gt;'</span> + e.routes[<span class="number">0</span>].steps[i].maneuver.instruction +</div><div class="line">                        <span class="string">'&lt;span class="mapbox-directions-step-distance fr"&gt;'</span> + (e.routes[<span class="number">0</span>].steps[i].distance * <span class="number">0.000621371</span>).toFixed(<span class="number">2</span>) + <span class="string">' mi&lt;/span&gt;'</span> +</div><div class="line">                        <span class="string">'&lt;/span&gt;'</span> +</div><div class="line">                        <span class="string">'&lt;/li&gt;'</span>;</div><div class="line"></div><div class="line">                    $(<span class="string">'.route .list'</span>).append(instruct);</div><div class="line">                }</div><div class="line"></div><div class="line">                L.marker([e.routes[<span class="number">0</span>].steps[e.routes[<span class="number">0</span>].steps.length - <span class="number">1</span>].maneuver.location.coordinates[<span class="number">1</span>], e.routes[<span class="number">0</span>].steps[e.routes[<span class="number">0</span>].steps.length - <span class="number">1</span>].maneuver.location.coordinates[<span class="number">0</span>]], {</div><div class="line">                    icon: L.mapbox.marker.icon({</div><div class="line">                        <span class="string">'marker-size'</span>: <span class="string">'small'</span>,</div><div class="line">                        <span class="string">'marker-color'</span>: <span class="string">'CB8A92'</span></div><div class="line">                    }),</div><div class="line">                    draggable: <span class="literal">true</span>,</div><div class="line">                    riseOnHover: <span class="literal">true</span></div><div class="line">                }).addTo(endMarker).on(<span class="string">'dragend'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> </span>{</div><div class="line">                    getDirections(locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lng, locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lat, e.target.getLatLng().lng, e.target.getLatLng().lat, <span class="literal">false</span>);</div><div class="line">                });</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (e.routes[<span class="number">0</span>].steps[section].maneuver.type.split(<span class="string">' '</span>)[<span class="number">1</span>]) {</div><div class="line">                    <span class="keyword">var</span> stepIcon = e.routes[<span class="number">0</span>].steps[section].maneuver.type.split(<span class="string">' '</span>)[<span class="number">1</span>];</div><div class="line">                } <span class="keyword">else</span> {</div><div class="line">                    <span class="keyword">var</span> stepIcon = e.routes[<span class="number">0</span>].steps[section].maneuver.type;</div><div class="line">                }</div><div class="line"></div><div class="line">                map.addLayer(circleMarkers);</div><div class="line">                map.addLayer(endMarker);</div><div class="line"></div><div class="line">                $(<span class="string">'.route .title'</span>).append(summary);</div><div class="line">                $(<span class="string">'.route .summary'</span>).append(duration);</div><div class="line">                $(<span class="string">'.step-icon'</span>).html(<span class="string">'&lt;span class="mapbox-directions-icon mapbox-turn-'</span> + stepIcon + <span class="string">'-icon"&gt;&lt;/span&gt;'</span>);</div><div class="line"></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; e.routes[<span class="number">0</span>].geometry.coordinates.length; i++) {</div><div class="line">                    line.push([e.routes[<span class="number">0</span>].geometry.coordinates[i][<span class="number">1</span>], e.routes[<span class="number">0</span>].geometry.coordinates[i][<span class="number">0</span>]]);</div><div class="line">                    <span class="keyword">if</span> (e.routes[<span class="number">0</span>].geometry.coordinates.length - <span class="number">1</span> == i) {</div><div class="line">                        <span class="keyword">var</span> polyline_options = {</div><div class="line">                            color: <span class="string">'#3887BE'</span>,</div><div class="line">                            weight: <span class="number">8</span>,</div><div class="line">                            opacity: <span class="number">.70</span></div><div class="line">                        };</div><div class="line">                        <span class="keyword">var</span> polyline = L.polyline(line, polyline_options).addTo(route);</div><div class="line">                        map.addLayer(route);</div><div class="line"></div><div class="line">                        <span class="keyword">if</span> (showMapView == <span class="literal">true</span>) {</div><div class="line">                            map.fitBounds(line, {</div><div class="line">                                padding: [<span class="number">10</span>, <span class="number">10</span>]</div><div class="line">                            });</div><div class="line">                        }</div><div class="line">                    }</div><div class="line">                }</div><div class="line">            }</div><div class="line">        });</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">clearMap</span><span class="params">()</span> </span>{</div><div class="line">        route.clearLayers(map);</div><div class="line">        circleMarkers.clearLayers(map);</div><div class="line">        endMarker.clearLayers(map);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">followUserAndRoute</span><span class="params">(route)</span> </span>{</div><div class="line"></div><div class="line">        <span class="keyword">var</span> currentCSS = locationMarker.getLayers()[<span class="number">0</span>]._icon.style.WebkitTransform;</div><div class="line">        locationMarker.getLayers()[<span class="number">0</span>]._icon.style.WebkitTransform = locationMarker.getLayers()[<span class="number">0</span>]._icon.style.WebkitTransform + <span class="string">' rotate('</span> + heading + <span class="string">'deg)'</span>;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> userLocation = locationMarker.getLayers()[<span class="number">0</span>].getLatLng();</div><div class="line"></div><div class="line">        <span class="comment">// If at the end of the route, stop</span></div><div class="line">        <span class="keyword">if</span> (!route.routes[<span class="number">0</span>].steps[section]) {</div><div class="line">            <span class="keyword">var</span> distance = <span class="number">0</span>;</div><div class="line">            clearMap();</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">var</span> distance = dotToDotDistance(L.latLng(route.routes[<span class="number">0</span>].steps[section].maneuver.location.coordinates[<span class="number">1</span>], route.routes[<span class="number">0</span>].steps[section].maneuver.location.coordinates[<span class="number">0</span>]), userLocation);</div><div class="line"></div><div class="line">            showDirectionAlert((distance), route.routes[<span class="number">0</span>].steps[section].maneuver.instruction);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (section &gt; <span class="number">0</span>) {</div><div class="line">                <span class="keyword">var</span> distanceToStep = (route.routes[<span class="number">0</span>].steps[section - <span class="number">1</span>].distance);</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">var</span> distanceToStep = (route.routes[<span class="number">0</span>].steps[<span class="number">0</span>].distance);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">// Flash direction when user is 90% through current step</span></div><div class="line">            <span class="keyword">if</span> (((distanceToStep - distance) / distanceToStep) * <span class="number">100</span> &gt; <span class="number">90</span>) {</div><div class="line">                $(<span class="string">'.alert-box .action'</span>).addClass(<span class="string">'flash'</span>);</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                $(<span class="string">'.alert-box .action'</span>).removeClass(<span class="string">'flash'</span>);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (distance &lt; madeToNextStepDistance) {</div><div class="line">                section++</div><div class="line">                saySomethingOnce = <span class="number">0</span>;</div><div class="line">                followUserAndRoute(route)</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                checkIfUserIsInOtherCircle(route, userLocation); <span class="comment">//If not within 50 meters of desired circle, double check if they are within another circle</span></div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (route.routes[<span class="number">0</span>].steps[section].maneuver.type.split(<span class="string">' '</span>)[<span class="number">1</span>]) {</div><div class="line">                <span class="keyword">var</span> stepIcon = route.routes[<span class="number">0</span>].steps[section].maneuver.type.split(<span class="string">' '</span>)[<span class="number">1</span>];</div><div class="line">            } <span class="keyword">else</span> {</div><div class="line">                <span class="keyword">var</span> stepIcon = route.routes[<span class="number">0</span>].steps[section].maneuver.type;</div><div class="line">            }</div><div class="line"></div><div class="line">            $(<span class="string">'.step-icon'</span>).html(<span class="string">'&lt;span class="mapbox-directions-icon mapbox-turn-'</span> + stepIcon + <span class="string">'-icon"&gt;&lt;/span&gt;'</span>);</div><div class="line">            $(<span class="string">'.progress'</span>).attr(<span class="string">'width'</span>, <span class="built_in">Math</span>.abs(<span class="built_in">Math</span>.round(((distanceToStep - distance) / distanceToStep) * <span class="number">100</span>)) + <span class="string">'%'</span>);</div><div class="line"></div><div class="line">            <span class="comment">//Only say instructions once</span></div><div class="line">            <span class="keyword">if</span> (saySomethingOnce == <span class="number">0</span>) {</div><div class="line">                saySomething(<span class="built_in">encodeURIComponent</span>(<span class="string">'In '</span> + <span class="built_in">Math</span>.round(distance) + <span class="string">' meters, '</span> + route.routes[<span class="number">0</span>].steps[section].maneuver.instruction));</div><div class="line">                saySomethingOnce++;</div><div class="line">            }</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">showDirectionAlert</span><span class="params">(distance, maneuver)</span> </span>{</div><div class="line">        $(<span class="string">'.alert-box .action .distance'</span>).html(<span class="string">'In '</span> + <span class="built_in">Math</span>.round(distance) + <span class="string">' meters, '</span>);</div><div class="line">        $(<span class="string">'.alert-box .action .maneuver'</span>).html(maneuver);</div><div class="line">        $(<span class="string">'.alert-box, .progress-limiter'</span>).slideDown();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">saySomething</span><span class="params">(text)</span> </span>{</div><div class="line">        $(<span class="string">'.voice'</span>).empty();</div><div class="line"></div><div class="line">    	$(<span class="string">'.voice'</span>).append(<span class="string">"&lt;audio autoplay&gt;&lt;source src=http://tts-api.com/tts.mp3?q="</span> + text + <span class="string">" type=audio/mpeg&gt;&lt;/audio&gt;&lt;p&gt;\""</span> + text + <span class="string">"\""</span>);</div><div class="line"></div><div class="line">      </div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkIfUserIsInOtherCircle</span><span class="params">(route, user)</span> </span>{</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">        circleMarkers.eachLayer(<span class="function"><span class="keyword">function</span> <span class="params">(layer)</span> </span>{</div><div class="line">            i++</div><div class="line">            <span class="keyword">var</span> distance = dotToDotDistance(layer.getLatLng(), user);</div><div class="line">            <span class="keyword">if</span> (distance &lt; madeToNextStepDistance) {</div><div class="line">                section = i; <span class="comment">// Update current section to current circle</span></div><div class="line">            }</div><div class="line">        });</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkUserComparedToRoute</span><span class="params">(route)</span> </span>{</div><div class="line">        <span class="keyword">var</span> minDistance = [];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; route.routes[<span class="number">0</span>].geometry.coordinates.length - <span class="number">1</span>; i++) {</div><div class="line">            <span class="keyword">if</span> ((i + <span class="number">2</span>)) {</div><div class="line">                <span class="keyword">var</span> userDistance = dotLineDistance(locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lat, locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lng, route.routes[<span class="number">0</span>].geometry.coordinates[i][<span class="number">1</span>], route.routes[<span class="number">0</span>].geometry.coordinates[i][<span class="number">0</span>], route.routes[<span class="number">0</span>].geometry.coordinates[i + <span class="number">1</span>][<span class="number">1</span>], route.routes[<span class="number">0</span>].geometry.coordinates[i + <span class="number">1</span>][<span class="number">0</span>], <span class="literal">true</span>) * <span class="number">69.047</span> * <span class="number">1609.34</span>;</div><div class="line">                minDistance.push(userDistance);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Check if the user is within x meters of any segment on route</span></div><div class="line">        <span class="keyword">if</span> (getMinArray(minDistance) &gt; reRouteDistance) {</div><div class="line">            getDirections(locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lng, locationMarker.getLayers()[<span class="number">0</span>].getLatLng().lat, lastPressed.latlng.lng, lastPressed.latlng.lat, <span class="literal">false</span>);</div><div class="line">	    $(<span class="string">'.voice'</span>).attr(<span class="string">'src'</span>, <span class="string">'http://tts-api.com/tts.mp3?q=Recalculating'</span>)</div><div class="line"></div><div class="line">            section = <span class="number">0</span>;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'User is within'</span> + reRouteDistance + <span class="string">'meters of route'</span>)</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getMinArray</span><span class="params">(numArray)</span> </span>{</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, numArray);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dotLineDistance</span><span class="params">(x, y, x0, y0, x1, y1, o)</span> </span>{</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">lineLength</span><span class="params">(x, y, x0, y0)</span> </span>{</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt((x -= x0) * x + (y -= y0) * y);</div><div class="line">        }</div><div class="line">        <span class="keyword">if</span> (o && !(o = <span class="function"><span class="keyword">function</span> <span class="params">(x, y, x0, y0, x1, y1)</span> </span>{</div><div class="line">            <span class="keyword">if</span> (!(x1 - x0)) <span class="keyword">return</span> {</div><div class="line">                x: x0,</div><div class="line">                y: y</div><div class="line">            };</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (!(y1 - y0)) <span class="keyword">return</span> {</div><div class="line">                x: x,</div><div class="line">                y: y0</div><div class="line">            };</div><div class="line">            <span class="keyword">var</span> left, tg = -<span class="number">1</span> / ((y1 - y0) / (x1 - x0));</div><div class="line">            <span class="keyword">return</span> {</div><div class="line">                x: left = (x1 * (x * tg - y + y0) + x0 * (x * -tg + y - y1)) / (tg * (x1 - x0) + y0 - y1),</div><div class="line">                y: tg * left - tg * x + y</div><div class="line">            };</div><div class="line">        }(x, y, x0, y0, x1, y1), o.x &gt;= <span class="built_in">Math</span>.min(x0, x1) && o.x &lt;= <span class="built_in">Math</span>.max(x0, x1) && o.y &gt;= <span class="built_in">Math</span>.min(y0, y1) && o.y &lt;= <span class="built_in">Math</span>.max(y0, y1))) {</div><div class="line">            <span class="keyword">var</span> l1 = lineLength(x, y, x0, y0),</div><div class="line">                l2 = lineLength(x, y, x1, y1);</div><div class="line">            <span class="keyword">return</span> l1 &gt; l2 ? l2 : l1;</div><div class="line">        } <span class="keyword">else</span> {</div><div class="line">            <span class="keyword">var</span> a = y0 - y1,</div><div class="line">                b = x1 - x0,</div><div class="line">                c = x0 * y1 - y0 * x1;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Math</span>.abs(a * x + b * y + c) / <span class="built_in">Math</span>.sqrt(a * a + b * b);</div><div class="line">        }</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dotToDotDistance</span><span class="params">(point1, point2)</span> </span>{</div><div class="line">        <span class="keyword">return</span> point1.distanceTo(point2);;</div><div class="line">    }</div><div class="line"></div><div class="line">});</div></pre></td></tr></table></figure>

<p>assets/js/hash.js contains the code that checks your mouse movements and right clicks.<br>This is what’s going to be replaced by a search query where you will insert a street or a poi name</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div></pre></td><td class="code"><pre><div class="line"><span class="list">(<span class="title">function</span><span class="list">(<span class="title">window</span>)</span> {</span></div><div class="line">    var HAS_HASHCHANGE = <span class="list">(<span class="title">function</span><span class="list">()</span> {</span></div><div class="line">        var doc_mode = window.documentMode<span class="comment">;</span></div><div class="line">        return <span class="list">(<span class="quoted">'onhashchange</span>' in window)</span> <span class="keyword">&&</span></div><div class="line">            <span class="list">(<span class="title">doc_mode</span> === undefined || doc_mode &gt; <span class="number">7</span>)</span><span class="comment">;</span></div><div class="line">    })<span class="list">()</span><span class="comment">;</span></div><div class="line"> </div><div class="line">    L.Hash = function<span class="list">(<span class="title">map</span>)</span> {</div><div class="line">        this.onHashChange = L.Util.bind<span class="list">(<span class="title">this</span>.onHashChange, this)</span><span class="comment">;</span></div><div class="line"> </div><div class="line">        if <span class="list">(<span class="title">map</span>)</span> {</div><div class="line">            this.init<span class="list">(<span class="title">map</span>)</span><span class="comment">;</span></div><div class="line">        }</div><div class="line">    }<span class="comment">;</span></div><div class="line"> </div><div class="line">    L.Hash.parseHash = function<span class="list">(<span class="title">hash</span>)</span> {</div><div class="line">        if<span class="list">(<span class="title">hash</span>.indexOf<span class="list">(<span class="quoted">'#</span>')</span> === <span class="number">0</span>)</span> {</div><div class="line">            hash = hash.substr<span class="list">(<span class="number">1</span>)</span><span class="comment">;</span></div><div class="line">        }</div><div class="line">        var args = hash.split<span class="list">(<span class="string">"/"</span>)</span><span class="comment">;</span></div><div class="line">        if <span class="list">(<span class="title">args</span>.length == <span class="number">3</span>)</span> {</div><div class="line">            var zoom = parseInt<span class="list">(<span class="title">args</span>[<span class="number">0</span>], <span class="number">10</span>)</span>,</div><div class="line">            lat = parseFloat<span class="list">(<span class="title">args</span>[<span class="number">1</span>])</span>,</div><div class="line">            lon = parseFloat<span class="list">(<span class="title">args</span>[<span class="number">2</span>])</span><span class="comment">;</span></div><div class="line">            if <span class="list">(<span class="title">isNaN</span><span class="list">(<span class="title">zoom</span>)</span> || isNaN<span class="list">(<span class="title">lat</span>)</span> || isNaN<span class="list">(<span class="title">lon</span>)</span>)</span> {</div><div class="line">                return false<span class="comment">;</span></div><div class="line">            } else {</div><div class="line">                return {</div><div class="line">                    center: new L.LatLng<span class="list">(<span class="title">lat</span>, lon)</span>,</div><div class="line">                    zoom: zoom</div><div class="line">                }<span class="comment">;</span></div><div class="line">            }</div><div class="line">        } else {</div><div class="line">            return false<span class="comment">;</span></div><div class="line">        }</div><div class="line">    }<span class="comment">;</span></div><div class="line"> </div><div class="line">    L.Hash.formatHash = function<span class="list">(<span class="title">map</span>)</span> {</div><div class="line">        var center = map.getCenter<span class="list">()</span>,</div><div class="line">            zoom = map.getZoom<span class="list">()</span>,</div><div class="line">            precision = Math.max<span class="list">(<span class="number">0</span>, Math.ceil<span class="list">(<span class="title">Math</span>.log<span class="list">(<span class="title">zoom</span>)</span> / Math.LN<span class="number">2</span>)</span>)</span><span class="comment">;</span></div><div class="line"> </div><div class="line">        return <span class="string">"#"</span> + [zoom,</div><div class="line">            center.lat.toFixed<span class="list">(<span class="title">precision</span>)</span>,</div><div class="line">            center.lng.toFixed<span class="list">(<span class="title">precision</span>)</span></div><div class="line">        ].join<span class="list">(<span class="string">"/"</span>)</span><span class="comment">;</span></div><div class="line">    },</div><div class="line"> </div><div class="line">    L.Hash.prototype = {</div><div class="line">        map: null,</div><div class="line">        lastHash: null,</div><div class="line"> </div><div class="line">        parseHash: L.Hash.parseHash,</div><div class="line">        formatHash: L.Hash.formatHash,</div><div class="line"> </div><div class="line">        init: function<span class="list">(<span class="title">map</span>)</span> {</div><div class="line">            this.map = map<span class="comment">;</span></div><div class="line"> </div><div class="line">            // reset the hash</div><div class="line">            this.lastHash = null<span class="comment">;</span></div><div class="line">            this.onHashChange<span class="list">()</span><span class="comment">;</span></div><div class="line"> </div><div class="line">            if <span class="list">(!this.isListening)</span> {</div><div class="line">                this.startListening<span class="list">()</span><span class="comment">;</span></div><div class="line">            }</div><div class="line">        },</div><div class="line"> </div><div class="line">        removeFrom: function<span class="list">(<span class="title">map</span>)</span> {</div><div class="line">            if <span class="list">(<span class="title">this</span>.changeTimeout)</span> {</div><div class="line">                clearTimeout<span class="list">(<span class="title">this</span>.changeTimeout)</span><span class="comment">;</span></div><div class="line">            }</div><div class="line"> </div><div class="line">            if <span class="list">(<span class="title">this</span>.isListening)</span> {</div><div class="line">                this.stopListening<span class="list">()</span><span class="comment">;</span></div><div class="line">            }</div><div class="line"> </div><div class="line">            this.map = null<span class="comment">;</span></div><div class="line">        },</div><div class="line"> </div><div class="line">        onMapMove: function<span class="list">()</span> {</div><div class="line">            // bail if we<span class="quoted">'re</span> moving the map <span class="list">(<span class="title">updating</span> from a hash)</span>,</div><div class="line">            // or if the map is not yet loaded</div><div class="line"> </div><div class="line">            if <span class="list">(<span class="title">this</span>.movingMap || !this.map._loaded)</span> {</div><div class="line">                return false<span class="comment">;</span></div><div class="line">            }</div><div class="line"> </div><div class="line">            var hash = this.formatHash<span class="list">(<span class="title">this</span>.map)</span><span class="comment">;</span></div><div class="line">            if <span class="list">(<span class="title">this</span>.lastHash != hash)</span> {</div><div class="line">                location.replace<span class="list">(<span class="title">hash</span>)</span><span class="comment">;</span></div><div class="line">                this.lastHash = hash<span class="comment">;</span></div><div class="line">            }</div><div class="line">        },</div><div class="line"> </div><div class="line">        movingMap: false,</div><div class="line">        update: function<span class="list">()</span> {</div><div class="line">            var hash = location.hash<span class="comment">;</span></div><div class="line">            if <span class="list">(<span class="title">hash</span> === this.lastHash)</span> {</div><div class="line">                return<span class="comment">;</span></div><div class="line">            }</div><div class="line">            var parsed = this.parseHash<span class="list">(<span class="title">hash</span>)</span><span class="comment">;</span></div><div class="line">            if <span class="list">(<span class="title">parsed</span>)</span> {</div><div class="line">                this.movingMap = true<span class="comment">;</span></div><div class="line"> </div><div class="line">                this.map.setView<span class="list">(<span class="title">parsed</span>.center, parsed.zoom)</span><span class="comment">;</span></div><div class="line"> </div><div class="line">                this.movingMap = false<span class="comment">;</span></div><div class="line">            } else {</div><div class="line">                this.onMapMove<span class="list">(<span class="title">this</span>.map)</span><span class="comment">;</span></div><div class="line">            }</div><div class="line">        },</div><div class="line"> </div><div class="line">        // defer hash change updates every <span class="number">100</span>ms</div><div class="line">        changeDefer: <span class="number">100</span>,</div><div class="line">        changeTimeout: null,</div><div class="line">        onHashChange: function<span class="list">()</span> {</div><div class="line">            // throttle calls to update<span class="list">()</span> so that they only happen every</div><div class="line">            // `changeDefer` ms</div><div class="line">            if <span class="list">(!this.changeTimeout)</span> {</div><div class="line">                var that = this<span class="comment">;</span></div><div class="line">                this.changeTimeout = setTimeout<span class="list">(<span class="title">function</span><span class="list">()</span> {</span></div><div class="line">                    that.update<span class="list">()</span><span class="comment">;</span></div><div class="line">                    that.changeTimeout = null<span class="comment">;</span></div><div class="line">                }, this.changeDefer)<span class="comment">;</span></div><div class="line">            }</div><div class="line">        },</div><div class="line"> </div><div class="line">        isListening: false,</div><div class="line">        hashChangeInterval: null,</div><div class="line">        startListening: function<span class="list">()</span> {</div><div class="line">            this.map.on<span class="list">(<span class="string">"moveend"</span>, this.onMapMove, this)</span><span class="comment">;</span></div><div class="line"> </div><div class="line">            if <span class="list">(<span class="title">HAS_HASHCHANGE</span>)</span> {</div><div class="line">                L.DomEvent.addListener<span class="list">(<span class="title">window</span>, <span class="string">"hashchange"</span>, this.onHashChange)</span><span class="comment">;</span></div><div class="line">            } else {</div><div class="line">                clearInterval<span class="list">(<span class="title">this</span>.hashChangeInterval)</span><span class="comment">;</span></div><div class="line">                this.hashChangeInterval = setInterval<span class="list">(<span class="title">this</span>.onHashChange, <span class="number">50</span>)</span><span class="comment">;</span></div><div class="line">            }</div><div class="line">            this.isListening = true<span class="comment">;</span></div><div class="line">        },</div><div class="line"> </div><div class="line">        stopListening: function<span class="list">()</span> {</div><div class="line">            this.map.off<span class="list">(<span class="string">"moveend"</span>, this.onMapMove, this)</span><span class="comment">;</span></div><div class="line"> </div><div class="line">            if <span class="list">(<span class="title">HAS_HASHCHANGE</span>)</span> {</div><div class="line">                L.DomEvent.removeListener<span class="list">(<span class="title">window</span>, <span class="string">"hashchange"</span>, this.onHashChange)</span><span class="comment">;</span></div><div class="line">            } else {</div><div class="line">                clearInterval<span class="list">(<span class="title">this</span>.hashChangeInterval)</span><span class="comment">;</span></div><div class="line">            }</div><div class="line">            this.isListening = false<span class="comment">;</span></div><div class="line">        }</div><div class="line">    }<span class="comment">;</span></div><div class="line">    L.hash = function<span class="list">(<span class="title">map</span>)</span> {</div><div class="line">        return new L.Hash<span class="list">(<span class="title">map</span>)</span><span class="comment">;</span></div><div class="line">    }<span class="comment">;</span></div><div class="line">    L.Map.prototype.addHash = function<span class="list">()</span> {</div><div class="line">        this._hash = L.hash<span class="list">(<span class="title">this</span>)</span><span class="comment">;</span></div><div class="line">    }<span class="comment">;</span></div><div class="line">    L.Map.prototype.removeHash = function<span class="list">()</span> {</div><div class="line">        this._hash.removeFrom<span class="list">()</span><span class="comment">;</span></div><div class="line">    }<span class="comment">;</span></div><div class="line">})<span class="list">(<span class="title">window</span>)</span><span class="comment">;</span></div></pre></td></tr></table></figure>

<hr>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2014/09/19/fxos20/">
  <time datetime="2014-09-19T21:32:00.000Z">
    Sep 19 2014
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2014/09/19/fxos20/">fxos2.0</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="Firefox_OS_2-0_build_">Firefox OS 2.0 build </h1>
<h2 id="With_Italian_keyboard_and_dictionary_">With Italian keyboard and dictionary </h2>
<p>Why do you want to build your own b2g if mozilla provides all flavoured b2g versions already compiled ?<br>I did it because I missed the Italian keyboard and Italian words prediction on b2g 2.x series.<br>By following this guide <a href="https://www.eyemovic.com/blog_it/5673.php" target="_blank" rel="external">https://www.eyemovic.com/blog_it/5673.php</a> I was able to have an updated phone for Italian readars.</p>
<h2 id="Script_to_build_it">Script to build it</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># to backup your system and data run the following</span></div><div class="line"><span class="comment"># adb pull /system ~/Documents/system</span></div><div class="line"><span class="comment"># adb pull /data ~/Documents/data</span></div><div class="line"></div><div class="line"><span class="built_in">cd</span> ~</div><div class="line">mkdir b2g</div><div class="line"><span class="built_in">cd</span> b2g</div><div class="line">git clone git://github.com/mozilla-b2g/B2G.git</div><div class="line"><span class="built_in">cd</span> B2G</div><div class="line"></div><div class="line">BRANCH=v2.<span class="number">0</span> ./config.sh flame</div><div class="line">git pull</div><div class="line">./repo sync</div><div class="line">./build.sh -j4</div><div class="line"></div><div class="line"><span class="built_in">cd</span> ~/b2g</div><div class="line">hg clone http://hg.mozilla.org/gaia<span class="operator">-l</span>10n/it gaia<span class="operator">-l</span>10n/it</div><div class="line"><span class="comment"># Create your lang.json </span></div><div class="line">hg clone http://hg.mozilla.org/l10n-central/it gecko<span class="operator">-l</span>10n/it</div><div class="line">hg clone http://hg.mozilla.org/build/compare-locales</div><div class="line"></div><div class="line"><span class="keyword">export</span> LOCALE_BASEDIR=<span class="variable">$PWD</span>/gaia<span class="operator">-l</span>10n</div><div class="line"><span class="keyword">export</span> LOCALES_FILE=<span class="variable">$PWD</span>/B2G/gaia/shared/resources/languages.json</div><div class="line"><span class="keyword">export</span> L10NBASEDIR=<span class="variable">$PWD</span>/gecko<span class="operator">-l</span>10n</div><div class="line"><span class="keyword">export</span> MOZ_CHROME_MULTILOCALE=<span class="string">"it"</span></div><div class="line"><span class="keyword">export</span> PATH=<span class="string">"<span class="variable">$PATH</span>:<span class="variable">$PWD</span>/compare-locales/scripts"</span></div><div class="line"><span class="keyword">export</span> PYTHONPATH=<span class="string">"<span class="variable">$PWD</span>/compare-locales/lib"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">cd</span> ~/b2g/B2G/device/t2m/flame</div><div class="line">./extract-files.sh</div><div class="line"><span class="keyword">export</span> MOZILLA_OFFICIAL=<span class="number">1</span></div><div class="line"><span class="built_in">cd</span> ~/B2G/</div><div class="line">rm -rf out</div><div class="line">rm -rf objdir-gecko</div><div class="line">GAIA_KEYBOARD_LAYOUTS=en,it ./build.sh -j4</div></pre></td></tr></table></figure>

<p>As you can read, you have to create your own languages.json file.<br>I created mine and it just contains the following code:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">  "<span class="attribute">en-US</span>"     : <span class="value"><span class="string">"English (US)"</span></span>,</div><div class="line">  "<span class="attribute">it</span>"        : <span class="value"><span class="string">"Italian"</span></span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>Hope your’ll enjoy your 2.x firefox os build with your own language.<br>You can find my precompiled build at <a href="https://www.dropbox.com/s/fls9b1q6uh2ul8f/flame-ita-2.0?dl=0" target="_blank" rel="external">https://www.dropbox.com/s/fls9b1q6uh2ul8f/flame-ita-2.0?dl=0</a></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2014/09/08/tutorial/">
  <time datetime="2014-09-08T21:32:00.000Z">
    Sep 8 2014
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2014/09/08/tutorial/">Tutorial</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="Firefox_OS_tutorial">Firefox OS tutorial</h1>
<h2 id="Mapbox_turn_by_turn_navigation_app">Mapbox turn by turn navigation app</h2>
<p>This is my first tutorial about Firefox os apps where I’ll explain how I created an hosted webapp by using an open github project I found at <a href="https://github.com/rsudekum/navigation" target="_blank" rel="external">https://github.com/rsudekum/navigation</a>.<br>First I’ll try explain the code I found so let’s create three files:</p>
<ul>
<li>index.html</li>
<li>site.js (in folder assets/js)</li>
<li>site.css (in folder assets/css)</li>
</ul>
<h2 id="index-html">index.html</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">'utf-8'</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Navigation<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">'//api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css'</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'//www.mapbox.com/base/latest/base.css'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">'stylesheet'</span> <span class="attribute">href</span>=<span class="value">'assets/css/site.css'</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">'map'</span>&gt;</span></div><div class="line">       </div><div class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/mapbox.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/jquery.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">'assets/js/site.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>The html file will first load two css from mapbox (base.css and mapbox.css) and one from localhost (site.css). Next it’s going to show our map with the div whose id is named ‘map’. In the end it’s going to load three js files from localhost: mapbox.js (the same one that you can download at <a href="https://api.tiles.mapbox.com/mapbox.js/v2.1.0/mapbox.js" target="_blank" rel="external">https://api.tiles.mapbox.com/mapbox.js/v2.1.0/mapbox.js</a>), jquery.js (see jquery.com/download/) and our own site.js.</p>
<h2 id="site-css">site.css</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="id">#map</span> <span class="rules">{</span></div><div class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value">absolute</span></span>;</div><div class="line">    <span class="rule"><span class="attribute">top</span>:<span class="value"><span class="number">0</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">bottom</span>:<span class="value"><span class="number">0</span></span></span>;</div><div class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100%</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>Our css file will simply instruct how to draw our map id.</p>
<h2 id="site-js">site.js</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">    L.mapbox.accessToken = <span class="string">'pk.eyJ1Ijoic3Vva28iLCJhIjoicUl0WUpGbyJ9.PHo4BAra3WHDCljdCQ8F6Q'</span>;</div><div class="line">    <span class="keyword">var</span> map = L.mapbox.map(<span class="string">'map'</span>, <span class="string">'suoko.jbhn5d4b'</span>, {</div><div class="line">    })</div><div class="line">});</div></pre></td></tr></table></figure>

<p>This is where our map gets drew. You only have to specify your map id which can be obtained from your mapbox project at www.mapbox.com/projects/ and then give your mapbox access public token.</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2014/09/07/my-first-post/">
  <time datetime="2014-09-07T07:35:46.000Z">
    Sep 7 2014
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2014/09/07/my-first-post/">my first post</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="Dillinger">Dillinger</h1>
<p>Dillinger is a cloud-enabled HTML5 Markdown editor.</p>
<ul>
<li>Type some Markdown text in the left window</li>
<li>See the HTML in the right</li>
<li>Magic</li>
</ul>
<p>Markdown is a lightweight markup language based on the formatting conventions that people naturally use in email.  As <a href="http://daringfireball.net/" target="_blank" rel="external">John Gruber</a> writes on the <a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="external">Markdown site</a>:</p>
<blockquote>
<p>The overriding design goal for Markdown’s<br>formatting syntax is to make it as readable<br>as possible. The idea is that a<br>Markdown-formatted document should be<br>publishable as-is, as plain text, without<br>looking like it’s been marked up with tags<br>or formatting instructions.</p>
</blockquote>
<p>This text you see here is <em>actually</em> written in Markdown! To get a feel for Markdown’s syntax, type some text into the left window and watch the results in the right.  </p>
<h2 id="Version">Version</h2>
<p>2.0</p>
<h2 id="Tech">Tech</h2>
<p>Dillinger uses a number of open source projects to work properly:</p>
<ul>
<li><a href="http://ace.ajax.org" target="_blank" rel="external">Ace Editor</a> - awesome web-based text editor</li>
<li><a href="https://github.com/chjj/marked" target="_blank" rel="external">Marked</a> - a super fast port of Markdown to JavaScript</li>
<li><a href="http://twitter.github.com/bootstrap/" target="_blank" rel="external">Twitter Bootstrap</a> - great UI boilerplate for modern web apps</li>
<li><a href="http://nodejs.org" target="_blank" rel="external">node.js</a> - evented I/O for the backend</li>
<li><a href="http://expressjs.com" target="_blank" rel="external">Express</a> - fast node.js network app framework <a href="http://twitter.com/tjholowaychuk" target="_blank" rel="external">@tjholowaychuk</a></li>
<li><a href="https://github.com/madrobby/keymaster" target="_blank" rel="external">keymaster.js</a> - awesome keyboard handler lib by <a href="http://twitter.com/thomasfuchs" target="_blank" rel="external">@thomasfuchs</a></li>
<li><a href="http://jquery.com" target="_blank" rel="external">jQuery</a> - duh </li>
</ul>
<h2 id="Installation">Installation</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git clone [git-repo-url] dillinger</div><div class="line"><span class="built_in">cd</span> dillinger</div><div class="line">npm i <span class="operator">-d</span></div><div class="line">mkdir -p public/files/{md,html,pdf}</div></pre></td></tr></table></figure>

<h5 id="Configure_Plugins-_Instructions_in_following_README-md_files">Configure Plugins. Instructions in following README.md files</h5>
<ul>
<li>plugins/dropbox/README.md</li>
<li>plugins/github/README.md</li>
<li>plugins/googledrive/README.md</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node app</div></pre></td></tr></table></figure>

<h2 id="License">License</h2>
<p>MIT</p>
<p><strong>Free Software, Hell Yeah!</strong></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2014 <a href="/">Gabriele Vidali</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>